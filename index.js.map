{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"\n\nconst API_KEY = '46118726-f37cd2f98d2a6e2b7b3af8ac8';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport async function fetchImages(query, page) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\nq: query,\nimage_type: 'photo',\norientation: 'horizontal',\nsafesearch: true,\npage,\nper_page: 15,\n  });\n  try {\n    const {data} = await axios(`${BASE_URL}?${searchParams}`)\n    return data;\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong. Please try again later',\n    })\n  }\n}","export function createGalleryMarkup(images){\n  return images.map(({webformatURL,largeImageURL,likes,views,comments,downloads,tags}) =>\n    `<li class=\"gallery_item\">\n  <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"><ul>\n    <li>Likes ${likes}</li>\n    <li>Views ${views}</li>\n    <li>Comments ${comments}</li>\n    <li>Downloads ${downloads}</li>\n  </ul></a>\n </li>`).join('');\n}","import iziToast from \"izitoast\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { createGalleryMarkup } from \"./js/render-functions\";\nimport simpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader')\nconst loadMoreBtn = document.querySelector('.load-more');\nlet page=1\nlet query=''\nconst lightbox = new simpleLightbox('.gallery a');\nform.addEventListener('submit', onFormSearch);\nasync function onFormSearch(event){\n  event.preventDefault();\n  query = event.target.elements.state.value.trim();\n  console.log(query);\n  page=1;\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('is-hidden');\n  if(query === ''){\n    iziToast.warning({\n      message: 'Please enter a search query',\n    })\n    return;\n  }\n  loader.style.display = 'block';\n  try {\n    const data = await fetchImages(query, page);\n    if(data.hits.length === 0){\n      iziToast.warning({\n        message: 'Sorry, there are no images matching your search query. Please try again!'\n      })\n      return;\n    }\nconst markup = createGalleryMarkup(data.hits);\ngallery.insertAdjacentHTML('beforeend', markup);\nlightbox.refresh();\nif(data.totalHits > 15){\n  loadMoreBtn.classList.remove('is-hidden');\n\n}else{\n  loadMoreBtn.classList.add('is-hidden');\n}\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong. Please try again later',\n    })\n\n  }\n  finally {\n    loader.style.display = 'none';\n    form.reset();\n  }\n}\n\nloadMoreBtn.addEventListener('click', onLoadMore);\nasync function onLoadMore(){\n  page += 1;\n  loader.style.display = 'block';\n  try {\n    const data = await fetchImages(query, page);\n    const markup = createGalleryMarkup(data.hits);\ngallery.insertAdjacentHTML('beforeend', markup);\nlightbox.refresh();\nconst card = document.querySelector('.gallery_item');\nconst cardHeight = card.getBoundingClientRect().height;\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior : \"smooth\",\n})\nconst maxPage = Math.ceil(data.totalHits / 15);\nif (maxPage === page){\n  loadMoreBtn.classList.add('is-hidden');\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n  })\n}\nelse{\n  loadMoreBtn.classList.remove('is-hidden');\n}\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong. Please try again later',\n    })\n\n  }\n  finally{\n    loader.style.display = 'none';\n  }\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","searchParams","data","axios","error","iziToast","createGalleryMarkup","images","webformatURL","largeImageURL","likes","views","comments","downloads","tags","form","gallery","loader","loadMoreBtn","lightbox","simpleLightbox","onFormSearch","event","markup","onLoadMore","cardHeight"],"mappings":"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"}